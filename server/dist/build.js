(()=>{"use strict";var e={625:()=>{Vue.component("basket-item",{props:["item","remove-from-basket"],template:'\n    <div class="container-basket">\n        <div class="item-name">{{ item.product_name }}</div>\n        <div class="item-price">{{ item.price }}&nbsp;₽</div>\n        <div class="item-quantity">{{ item.quantity }}</div>\n        <div class="item-total">{{ item.price * item.quantity }}&nbsp₽</div>\n        <button type="button" class="remove-button" @click.preventDefault="removeFromBasket(item)">Удалить</button>\n    </div>'})},715:()=>{Vue.component("basket",{props:["basket","remove-from-basket"],template:'\n        <div class="basket">\n            <div class="container-basket">\n                <div class="item-name first-row">Goods name</div>\n                <div class="item-price first-row">Price</div>\n                <div class="item-quantity first-row">Quantity</div>\n                <div class="item-total first-row">{{ basket[0].product_name }}</div>\n                <div class="item-empty-zone"></div>\n            </div>\n            <basket-item v-for="item in basket" :item="item" :key="item.product_name" :remove-from-basket="removeFromBasket"></basket-item>\n            <div class="container-basket">\n                <div class="basket-total">SUBTOTAL</div>\n                <div class="basket-total">{{ basketTotal }}&nbsp;₽</div>\n                <div class="item-empty-zone"></div>\n            </div>\n        </div>',computed:{basketTotal(){return this.basket.map((e=>e.price*e.quantity)).reduce(((e,t)=>e+t))}}})},409:()=>{Vue.component("error-component",{props:["is_error"],template:'\n        <h3 v-if="is_error">\n            Server error\n        </h3>'})},981:()=>{Vue.component("goods-item",{props:["good","add-to-basket"],template:'\n        <div class="goods-item">\n          <div class="goods-description">\n            <h3>{{ good.product_name }}</h3>\n            <p>Цена: {{ good.price }}&nbsp;₽</p>\n          </div>\n          <button class="add-button" @click.preventDefault="addToBasket(good)">Добавить</button>\n        </div>'})},873:()=>{Vue.component("goods-list",{props:["goods","add-to-basket"],template:'\n        <div class="goods-list">\n            <goods-item v-for="good in goods" :good="good" :add-to-basket="addToBasket" :key="good.product_name"></goods-item>\n        </div>'})},423:()=>{Vue.component("goods-search",{props:["goodsprop"],data:function(){return{searchLine:""}},template:'\n        <div>\n            <input type="text" class="goods-search" v-model="searchLine">\n            <button class="search-button" type="button" @click.preventDefault="searchHandler">Поиск</button>\n        </div>',methods:{searchHandler(){if(""===this.searchLine)this.$parent.filteredGoods=this.$parent.goods;else{const e=this.searchLine.trim().toLowerCase();this.$parent.filteredGoods=this.$parent.goods.filter((t=>t.product_name.toLowerCase().includes(e))),this.searchLine=""}}}})}},t={};function s(o){var i=t[o];if(void 0!==i)return i.exports;var a=t[o]={exports:{}};return e[o](a,a.exports,s),a.exports}(()=>{function e(e){return new Promise((t=>{var s;window.XMLHttpRequest?s=new XMLHttpRequest:window.ActiveXObject&&(s=new ActiveXObject("Microsoft.XMLHTTP")),s.onreadystatechange=()=>{4===s.readyState&&t(s.responseText)},s.open("GET",e,!0),s.send()}))}s(873),s(981),s(715),s(625),s(409),s(423),new Vue({el:"#app",data:{goods:[],filteredGoods:[],basket:[],isVisibleBasket:!1,isServerError:!1,isBasketError:!1},methods:{basketHandler(){this.isVisibleBasket=!this.isVisibleBasket},addToBasket(e){makePostRequest("/addBasketItem",e).then((e=>{"error"===e?this.isBasketError=!0:this.basket=JSON.parse(e)}))},removeFromBasket(e){makePostRequest("removeBasketItem",e).then((e=>{"error"===e?this.isBasketError=!0:this.basket=JSON.parse(e)}))}},mounted(){e("/catalog").then((e=>{this.goods=JSON.parse(e),this.filteredGoods=this.goods})).catch((()=>{this.isServerError=!0})),e("/basket").then((e=>{this.basket=JSON.parse(e)})).catch((()=>{this.isBasketError=!0}))}})})()})();